# Playwright E2E-API Tests

This test suite uses [Playwright](https://playwright.dev/) to perform automated API testing for the ReqRes service:  
[https://reqres.in](https://reqres.in).

## Project Structure

```
playwright-e2e-api-tests/
├── .gitignore               # Git ignore file
├── package.json             # Project dependencies and scripts
├── playwright.config.ts     # Playwright configuration
├── README.md                # Project documentation
├── .github/                 # GitHub Actions workflows
│   └── workflows/
│       └── playwright.yml   # CI/CD workflow for Playwright tests
├── fixtures/                # Test data for UI and API tests
│   └── testData.ts
├── helpers/                 # Utility functions for tests
│   ├── types.ts
│   ├── api.ts
├── playwright-report/       # Test reports generated by Playwright
├── test-results/            # Test result artifacts
├── tests/                   # Test cases
│   └── API/                 # API test cases
│       └── users.spec.ts
```

## Prerequisites

- Node.js (LTS version recommended)
- npm
- Playwright browsers (installed automatically)
- Docker (optional)

## Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd playwright-e2e-api-tests
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

## Running Tests

### Run All Tests
```bash
npm test
```

### Run API Tests
```bash
npm run test:API
```

### Get Test Report
```bash
npm run test:report
```

## Test Reports

- After running tests, an HTML report is generated in the `playwright-report/` directory.
- To view the report, open `playwright-report/index.html` in a browser.

## Test Strategy

The testing strategy for this project is designed to ensure comprehensive coverage of API functionalities. Tests are categorized into **positive** and **negative** scenarios.

### API Tests

- CRUD operations for the user API.

### ✅ Positive Tests

- Register a user with valid credentials.
- Login a user with correct credentials.
- Retrieve a paginated list of users.
- Update a user with valid payload.
- Delete a user (expect 204).
- Handle delayed response with max 3 seconds.

### ❌ Negative Tests

- Register/login with missing or incorrect credentials (expect 400).
- Access non-existent user (expect 404).
- Send invalid update payload.

## CI/CD Integration

This project uses **GitHub Actions** for CI/CD. The workflow is defined in `.github/workflows/playwright.yml`.  
It runs all tests on every push or pull request to the `master` branch.

## Jenkins Integration

This project also supports **Jenkins CI/CD pipeline**, allowing tests to be automatically triggered in a Jenkins environment.

### 🔧 How to Run via Jenkins

#### 1. Jenkinsfile Setup

Ensure a `Jenkinsfile` exists at the root of the project with the following content:

\`\`\`groovy
pipeline {
  agent any

  tools {
    nodejs 'Node18' // Ensure Node.js is configured in Jenkins as "Node18"
  }

  stages {
    stage('Install Dependencies') {
      steps {
        sh 'npm ci'
      }
    }

    stage('Run Playwright Tests') {
      steps {
        sh 'npx playwright test'
      }
    }

    stage('Archive Reports') {
      steps {
        archiveArtifacts artifacts: 'playwright-report/**', allowEmptyArchive: true
        junit 'test-results/**/*.xml'
      }
    }
  }

  post {
    always {
      echo 'Build and test complete.'
    }
  }
}
\`\`\`

#### 2. Jenkins Project Setup

- Go to Jenkins and create a new **Pipeline job**
- Link it to your GitHub repository
- Jenkins will:
  - Clone the repo
  - Install dependencies
  - Run tests
  - Archive test reports

### 📁 Reports in Jenkins Pipeline

- Reports are archived in the `playwright-report/` directory
- View them in Jenkins under **Build Artifacts**

## Key Features

### API Tests

- CRUD operations on user endpoint
- Positive and negative API scenarios

### Utilities

- `helpers/api.ts`: API helper functions
- `helpers/ui.ts`: UI interaction utilities (if needed in future)
- `fixtures/`: Test data for API/UI

### Running Tests in Docker

Run tests in a Docker container:

```bash
docker-compose up --build
```

After the run, open the report at `playwright-report/index.html`.
